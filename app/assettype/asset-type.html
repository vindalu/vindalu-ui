<div class="row" style="margin:0">
    <div class="col-md-12" style="padding:0">
        <div class="section-header text-right" style="padding-left:10px;padding-right:10px;border-bottom:1px solid #ddd;">
            <table><tr>
                <td style="padding-left:10px;font-weight:bold">{{assetType}}</td>
                <td class="text-right small">
                    <button class="btn btn-default rsrc-ctrl-btn" ng-if="session!=null">
                        <a href="#/{{assetType}}/new">
                            <div class="glyphicon glyphicon-plus"></div>
                            <div style="font-size:10px">{{assetType}}</div>
                        </a>
                    </button>
                    <span class="dropdown">
                        <button class="btn btn-default rsrc-ctrl-btn" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon fa fa-th"></span>
                            <div style="font-size:10px">Properties</div>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" style="margin-top:15px">
                            <li ng-repeat="prop in typeProperties|orderBy"  class="small" style="font-weight:normal;padding:2px 10px">
                                <a href="javascript:void(0)" ng-click="togglePropertyVisibility(prop)" ng-class="{'property-visible': isPropertyVisible(prop)}">{{prop}}</a>
                            </li>
                        </ul>
                    </span>
                </td>
            </tr></table>
        </div>
        <div style="margin:7px 20px;">
            <table style="width:100%"><tr>
                <td>
                    <input type="text" placeholder="Search" ng-model="assetSearch" class="form-control" ng-change="searchForAsset()" style="border-radius:40px;">
                </td>
                <td class="text-right small" style="width:275px">
                    <span style="padding:0 10px;">Limit</span>
                    <span class="dropdown">
                        <button class="dropdown-toggle btn btn-default btn-sm" data-toggle="dropdown">
                            <span style="padding-right:10px">{{queryLimit}}</span><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" style="margin-top:10px">
                            <li ng-repeat="limit in [1000,2000,5000,'None']">
                                <a href="javascript:void(0)" ng-click="setQueryLimit(limit)">{{limit}}</a>
                            </li>
                        </ul>
                    </span>
                    <span style="padding:0 10px;">Showing</span>
                    <span class="dropdown">
                        <button class="dropdown-toggle btn btn-default btn-sm" data-toggle="dropdown">
                            <span style="padding-right:10px">{{searchResultLimit}}</span><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" style="margin-top:10px">
                            <li ng-repeat="limit in [100,250,500,1000]" >
                                <a href="javascript:void(0)" ng-click="setSearchLimit(limit)">{{limit}}</a>
                            </li>
                        </ul>
                    </span>
                </td>
                <td class="text-right" style="width:100px">
                    <span style="font-size:11px;color:#999">Loaded : {{searchResults.length}}</span>
                </td>
           </tr></table>
        </div>
        
        <div style="padding: 0 20px;border-top:1px solid #ddd">
            <div ng-if="searchLoading" style="padding:20px 0" class="text-center"><img src="imgs/loading.gif"></div>
            <table class="table" ng-if="searchResults.length>0" id="asset-table">
                <tr>
                    <th class="asset-table-header"></th>
                    <th class="asset-table-header" ng-click="sortBy='id'; reverseSort=!reverseSort">
                        ID <span ng-class="{'dropup': reverseSort && sortBy == 'id'}"><span class="caret"></span></span>
                    </th>
                    <th ng-repeat="sField in showFields" class="asset-table-header text-center" ng-click="sortBy='data[sField]'; reverseSort=!reverseSort">
                        {{sField}} <span ng-class="{'dropup': reverseSort && sortBy == 'data[sField]'}"><span class="caret"></span></span>
                    </th>
                    <th class="asset-table-header text-right" ng-click="sortBy='timestamp'; reverseSort=!reverseSort">
                        Last Modified <span ng-class="{'dropup': reverseSort && sortBy == 'timestamp' }"><span class="caret"></span></span>
                    </th>
                </tr>
                <tr ng-repeat="result in searchResults|orderBy:sortBy:reverseSort|limitTo:searchResultLimit">
                    <td class="small">{{$index+1}}</td>
                    <td><a href="#/{{assetType}}/{{result.id}}">{{result.id}}</a></td>
                    <td class="text-center" ng-repeat="sField in showFields" ng-switch="sField">
                        <span ng-switch-when="created_on" class="small">{{result.data.created_on|date:'HH:mm:ss MMM dd, yyyy'}}</span>
                        <span ng-switch-default>{{result.data[sField]}}</span>
                    </td>
                    <td class="text-right small">{{result.timestamp|date:'HH:mm:ss MMM dd, yyyy'}}</td>
                </tr> 
            </table>
        </div>
    </div>
</div>